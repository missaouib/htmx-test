<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{head::wrap(~{::title},~{::body})}" lang="en">
<head>
  <title>transactions</title>
</head>
<body>
<div th:replace="~{base::wrap(~{::#transaction-explorer})}">
  <div id="transaction-explorer" class="w-full h-full p-4">
    <div class="w-full h-full flex flex-col rounded-solid overflow-hidden">
      <div class="flex-1 min-h-0 overflow-auto">
        <table class="data-table text-left">
          <!--Set widths, resizable horizonral, ellipsis, overflow hidden
          - Save user preferred widths -->
          <thead class="sticky top-0 bg-neutral-0">
          <tr>
            <th>
              <div>Date</div>
            </th>
            <th>
              <div>Account</div>
            </th>
            <th>
              <div>Category</div>
            </th>
            <th>
              <div>Note</div>
            </th>
            <th class="text-right">
              <div>Amount</div>
            </th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="transaction : ${model.userData.transactions}">
            <td>
              <div class="w-max inline-block">
                <sl-format-date
                    th:date="${#temporals.formatISO(transaction.date)}"
                    year="numeric" month="2-digit" day="2-digit"
                    hour="2-digit" minute="2-digit">
                </sl-format-date>
              </div>
            </td>
            <td class="max-w-xxxs">
              <div th:text="${transaction.account}"
                   class="whitespace-nowrap overflow-hidden text-ellipsis discoverable"></div>
            </td>
            <td class="max-w-xxs">
              <div th:text="${transaction.category}"
                   class="whitespace-nowrap overflow-hidden text-ellipsis discoverable"></div>
            </td>
            <td th:text="${transaction.note}">
              <div>Payment at MASXMENOS</div>
            </td>
            <td class="text-right">
              <div class="w-max inline-block">
                <intl-number-format
                    th:value="${transaction.amount}"
                    options='{"style":"currency","currency":"COP"}'>
                </intl-number-format>
              </div>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div class="flex-initial flex flex-row select-none">
        <div class="text-sm">
          <label>
            Results per page:
            <span class="dropdown">
              <select name="size" class="text-right"
                      th:hx-get="@{/transactions}"
                      hx-target="#transaction-explorer"
                      hx-select="#transaction-explorer"
                      hx-swap="outerHTML"
                      hx-push-url="true">
                <option th:each="size : ${model.pageSizes}"
                        th:value="${size}" th:text="${size}"
                        th:selected="${size == model.userData.size}">20</option>
              </select>
            </span>
          </label>
        </div>
        <ul class="pagination"
            hx-boost="true"
            hx-target="#transaction-explorer"
            hx-select="#transaction-explorer"
            hx-swap="outerHTML">
          <li th:each="pageItem : ${model.userData.pagination}" class="inline-block text-sm">
            <div th:if="${pageItem.selected}" th:text="${pageItem.number}"
                 class="flex w-full h-full items-center justify-center rounded-full selected"></div>
            <div th:if="${pageItem.blank}" class="flex w-full h-full items-center justify-center">&#8230;</div>
            <a th:unless="${pageItem.blank || pageItem.selected}" th:text="${pageItem.number}"
               th:href="@{/transactions(page=${pageItem.number})}"
               class="flex w-full h-full items-center justify-center rounded-full no-underline">1</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
</body>
</html>
